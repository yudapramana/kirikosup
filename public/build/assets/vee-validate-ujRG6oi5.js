import{d as qe,M as re,L as C,N as He,O as Ke,u as v,o as Ye,P as Qe,E as Ve,w as J,Q as vt,r as ee,D as Ie,n as ye,R as mt,I as yt,i as Xe,C as ht}from"./@vue-Dapi5KFD.js";/**
  * vee-validate v4.6.9
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function de(e){return typeof e=="function"}function Je(e){return e==null}const le=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ze(e){return Number(e)>=0}function gt(e){const t=parseFloat(e);return isNaN(t)?e:t}const Ot={};function Vt(e){return Ot[e]}const ge=Symbol("vee-validate-form"),bt=Symbol("vee-validate-field-instance"),be=Symbol("Default empty value");function we(e){return de(e)&&!!e.__locatorRef}function he(e){return!!e&&de(e.validate)}function fe(e){return e==="checkbox"||e==="radio"}function At(e){return le(e)||Array.isArray(e)}function xe(e){return Array.isArray(e)?e.length===0:le(e)&&Object.keys(e).length===0}function Ae(e){return/^\[.+\]$/i.test(e)}function St(e){return et(e)&&e.multiple}function et(e){return e.tagName==="SELECT"}function Et(e,t){const n=![!1,null,void 0,0].includes(t.multiple)&&!Number.isNaN(t.multiple);return e==="select"&&"multiple"in t&&n}function Ft(e,t){return!Et(e,t)&&t.type!=="file"&&!fe(t.type)}function tt(e){return Be(e)&&e.target&&"submit"in e.target}function Be(e){return e?!!(typeof Event<"u"&&de(Event)&&e instanceof Event||e&&e.srcElement):!1}function Te(e,t){return t in e&&e[t]!==be}function U(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!U(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!U(r[1],t.get(r[0])))return!1;return!0}if(e instanceof File&&t instanceof File)return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){var a=i[r];if(!U(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}var Ue=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};function Ce(e){return Ae(e)?e.replace(/\[|\]/gi,""):e}function q(e,t,n){return e?Ae(t)?e[Ce(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((i,a)=>At(i)&&a in i?i[a]:n,e):n}function ae(e,t,n){if(Ae(t)){e[Ce(t)]=n;return}const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let a=0;a<r.length;a++){if(a===r.length-1){i[r[a]]=n;return}(!(r[a]in i)||Je(i[r[a]]))&&(i[r[a]]=Ze(r[a+1])?[]:{}),i=i[r[a]]}}function Fe(e,t){if(Array.isArray(e)&&Ze(t)){e.splice(Number(t),1);return}le(e)&&delete e[t]}function je(e,t){if(Ae(t)){delete e[Ce(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let a=0;a<n.length;a++){if(a===n.length-1){Fe(r,n[a]);break}if(!(n[a]in r)||Je(r[n[a]]))break;r=r[n[a]]}const i=n.map((a,o)=>q(e,n.slice(0,o).join(".")));for(let a=i.length-1;a>=0;a--)if(xe(i[a])){if(a===0){Fe(e,n[0]);continue}Fe(i[a-1],n[a-1])}}function B(e){return Object.keys(e)}function Se(e,t=void 0){const n=Xe();return(n==null?void 0:n.provides[e])||yt(e,t)}function Me(e,t,n){if(Array.isArray(e)){const r=[...e],i=r.findIndex(a=>Ue(a,t));return i>=0?r.splice(i,1):r.push(t),r}return Ue(e,t)?n:t}function ze(e,t=0){let n=null,r=[];return function(...i){return n&&window.clearTimeout(n),n=window.setTimeout(()=>{const a=e(...i);r.forEach(o=>o(a)),r=[]},t),new Promise(a=>r.push(a))}}function jt(e,t){return le(t)&&t.number?gt(e):e}function _e(e,t){let n;return async function(...i){const a=e(...i);n=a;const o=await a;return a!==n||(n=void 0,t(o,i)),o}}const nt=(e,t,n)=>t.slots.default?typeof e=="string"||!e?t.slots.default(n()):{default:()=>{var r,i;return(i=(r=t.slots).default)===null||i===void 0?void 0:i.call(r,n())}}:t.slots.default;function pe(e){if(rt(e))return e._value}function rt(e){return"_value"in e}function ke(e){if(!Be(e))return e;const t=e.target;if(fe(t.type)&&rt(t))return pe(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(St(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(pe);if(et(t)){const n=Array.from(t.options).find(r=>r.selected);return n?pe(n):t.value}return t.value}function it(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?le(e)&&e._$$isNormalized?e:le(e)?Object.keys(e).reduce((n,r)=>{const i=pt(e[r]);return e[r]!==!1&&(n[r]=De(i)),n},t):typeof e!="string"?t:e.split("|").reduce((n,r)=>{const i=wt(r);return i.name&&(n[i.name]=De(i.params)),n},t):t}function pt(e){return e===!0?[]:Array.isArray(e)||le(e)?e:[e]}function De(e){const t=n=>typeof n=="string"&&n[0]==="@"?Mt(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{})}const wt=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function Mt(e){const t=n=>q(n,e)||n[e];return t.__locatorRef=e,t}function _t(e){return Array.isArray(e)?e.filter(we):B(e).filter(t=>we(e[t])).map(t=>e[t])}const It={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Bt=Object.assign({},It);const Re=()=>Bt;async function at(e,t,n={}){const r=n==null?void 0:n.bails,i={name:(n==null?void 0:n.name)||"{field}",rules:t,bails:r??!0,formData:(n==null?void 0:n.values)||{}},o=(await Ct(i,e)).errors;return{errors:o,valid:!o.length}}async function Ct(e,t){if(he(e.rules))return kt(t,e.rules,{bails:e.bails});if(de(e.rules)||Array.isArray(e.rules)){const o={field:e.name,form:e.formData,value:t},f=Array.isArray(e.rules)?e.rules:[e.rules],s=f.length,m=[];for(let V=0;V<s;V++){const g=f[V],O=await g(t,o);if(typeof O!="string"&&O)continue;const M=typeof O=="string"?O:lt(o);if(m.push(M),e.bails)return{errors:m}}return{errors:m}}const n=Object.assign(Object.assign({},e),{rules:it(e.rules)}),r=[],i=Object.keys(n.rules),a=i.length;for(let o=0;o<a;o++){const f=i[o],s=await Rt(n,t,{name:f,params:n.rules[f]});if(s.error&&(r.push(s.error),e.bails))return{errors:r}}return{errors:r}}async function kt(e,t,n){var r;return{errors:await t.validate(e,{abortEarly:(r=n.bails)!==null&&r!==void 0?r:!0}).then(()=>[]).catch(a=>{if(a.name==="ValidationError")return a.errors;throw a})}}async function Rt(e,t,n){const r=Vt(n.name);if(!r)throw new Error(`No such validator '${n.name}' exists.`);const i=Nt(n.params,e.formData),a={field:e.name,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:i})},o=await r(t,i,a);return typeof o=="string"?{error:o}:{error:o?void 0:lt(a)}}function lt(e){const t=Re().generateMessage;return t?t(e):"Field is invalid"}function Nt(e,t){const n=r=>we(r)?r(t):r;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((r,i)=>(r[i]=n(e[i]),r),{})}async function Pt(e,t){const n=await e.validate(t,{abortEarly:!1}).then(()=>[]).catch(a=>{if(a.name!=="ValidationError")throw a;return a.inner||[]}),r={},i={};for(const a of n){const o=a.errors;r[a.path]={valid:!o.length,errors:o},o.length&&(i[a.path]=o[0])}return{valid:!n.length,results:r,errors:i}}async function Tt(e,t,n){const i=B(e).map(async m=>{var V,g,O;const j=await at(q(t,m),e[m],{name:((V=n==null?void 0:n.names)===null||V===void 0?void 0:V[m])||m,values:t,bails:(O=(g=n==null?void 0:n.bailsMap)===null||g===void 0?void 0:g[m])!==null&&O!==void 0?O:!0});return Object.assign(Object.assign({},j),{path:m})});let a=!0;const o=await Promise.all(i),f={},s={};for(const m of o)f[m.path]={valid:m.valid,errors:m.errors},m.valid||(a=!1,s[m.path]=m.errors[0]);return{valid:a,results:f,errors:s}}function Le(e,t,n){typeof n.value=="object"&&(n.value=E(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function E(e){if(typeof e!="object")return e;var t=0,n,r,i,a=Object.prototype.toString.call(e);if(a==="[object Object]"?i=Object.create(e.__proto__||null):a==="[object Array]"?i=Array(e.length):a==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(E(o))})):a==="[object Map]"?(i=new Map,e.forEach(function(o,f){i.set(E(f),E(o))})):a==="[object Date]"?i=new Date(+e):a==="[object RegExp]"?i=new RegExp(e.source,e.flags):a==="[object DataView]"?i=new e.constructor(E(e.buffer)):a==="[object ArrayBuffer]"?i=e.slice(0):a.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Le(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Le(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}let $e=0;function Ut(e,t){const{value:n,initialValue:r,setInitialValue:i}=ut(e,t.modelValue,!t.standalone),{errorMessage:a,errors:o,setErrors:f}=Dt(e,!t.standalone),s=zt(n,r,o),m=$e>=Number.MAX_SAFE_INTEGER?0:++$e;function V(g){var O;"value"in g&&(n.value=g.value),"errors"in g&&f(g.errors),"touched"in g&&(s.touched=(O=g.touched)!==null&&O!==void 0?O:s.touched),"initialValue"in g&&i(g.initialValue)}return{id:m,path:e,value:n,initialValue:r,meta:s,errors:o,errorMessage:a,setState:V}}function ut(e,t,n=!0){const r=n===!0?Se(ge,void 0):void 0,i=ee(v(t));function a(){return r?q(r.meta.value.initialValues,v(e),v(i)):v(i)}function o(V){if(!r){i.value=V;return}r.stageInitialValue(v(e),V,!0)}const f=C(a);if(!r)return{value:ee(a()),initialValue:f,setInitialValue:o};const s=t?v(t):q(r.values,v(e),v(f));return r.stageInitialValue(v(e),s,!0),{value:C({get(){return q(r.values,v(e))},set(V){r.setFieldValue(v(e),V)}}),initialValue:f,setInitialValue:o}}function zt(e,t,n){const r=Ie({touched:!1,pending:!1,valid:!0,validated:!!v(n).length,initialValue:C(()=>v(t)),dirty:C(()=>!U(v(e),v(t)))});return J(n,i=>{r.valid=!i.length},{immediate:!0,flush:"sync"}),r}function Dt(e,t){const n=t?Se(ge,void 0):void 0;function r(a){return a?Array.isArray(a)?a:[a]:[]}if(!n){const a=ee([]);return{errors:a,errorMessage:C(()=>a.value[0]),setErrors:o=>{a.value=r(o)}}}const i=C(()=>n.errorBag.value[v(e)]||[]);return{errors:i,errorMessage:C(()=>i.value[0]),setErrors:a=>{n.setFieldErrorBag(v(e),r(a))}}}function Lt(e,t,n){return fe(n==null?void 0:n.type)?Wt(e,t,n):ot(e,t,n)}function ot(e,t,n){const{initialValue:r,validateOnMount:i,bails:a,type:o,checkedValue:f,label:s,validateOnValueUpdate:m,uncheckedValue:V,standalone:g,keepValueOnUnmount:O,modelPropName:j,syncVModel:M}=$t(v(e),n),S=g?void 0:Se(ge);let K=!1;const{id:D,value:I,initialValue:L,meta:F,setState:$,errors:Z,errorMessage:H}=Ut(e,{modelValue:r,standalone:g});M&&qt({value:I,prop:j,handleChange:ie});const k=()=>{F.touched=!0},R=C(()=>{let c=v(t);const A=v(S==null?void 0:S.schema);return A&&!he(A)&&(c=Gt(A,v(e))||c),he(c)||de(c)||Array.isArray(c)?c:it(c)});async function _(c){var A,T;return S!=null&&S.validateSchema?(A=(await S.validateSchema(c)).results[v(e)])!==null&&A!==void 0?A:{valid:!0,errors:[]}:at(I.value,R.value,{name:v(s)||v(e),values:(T=S==null?void 0:S.values)!==null&&T!==void 0?T:{},bails:a})}const b=_e(async()=>(F.pending=!0,F.validated=!0,_("validated-only")),c=>(K&&(c.valid=!0,c.errors=[]),$({errors:c.errors}),F.pending=!1,c)),w=_e(async()=>_("silent"),c=>(K&&(c.valid=!0),F.valid=c.valid,c));function Y(c){return(c==null?void 0:c.mode)==="silent"?w():b()}function ie(c,A=!0){const T=ke(c);I.value=T,!m&&A&&b()}Ye(()=>{if(i)return b();(!S||!S.validateSchema)&&w()});function z(c){F.touched=c}let G,P=E(I.value);function te(){G=J(I,(c,A)=>{if(U(c,A)&&U(c,P))return;(m?b:w)(),P=E(c)},{deep:!0})}te();function ve(c){var A;G==null||G();const T=c&&"value"in c?c.value:L.value;$({value:E(T),initialValue:E(T),touched:(A=c==null?void 0:c.touched)!==null&&A!==void 0?A:!1,errors:(c==null?void 0:c.errors)||[]}),F.pending=!1,F.validated=!1,w(),ye(()=>{te()})}function Oe(c){I.value=c}function ue(c){$({errors:Array.isArray(c)?c:[c]})}const W={id:D,name:e,label:s,value:I,meta:F,errors:Z,errorMessage:H,type:o,checkedValue:f,uncheckedValue:V,bails:a,keepValueOnUnmount:O,resetField:ve,handleReset:()=>ve(),validate:Y,handleChange:ie,handleBlur:k,setState:$,setTouched:z,setErrors:ue,setValue:Oe};if(Qe(bt,W),Ve(t)&&typeof v(t)!="function"&&J(t,(c,A)=>{U(c,A)||(F.validated?b():w())},{deep:!0}),!S)return W;S.register(W),vt(()=>{K=!0,S.unregister(W)});const oe=C(()=>{const c=R.value;return!c||de(c)||he(c)||Array.isArray(c)?{}:Object.keys(c).reduce((A,T)=>{const Ee=_t(c[T]).map(Q=>Q.__locatorRef).reduce((Q,ne)=>{const se=q(S.values,ne)||S.values[ne];return se!==void 0&&(Q[ne]=se),Q},{});return Object.assign(A,Ee),A},{})});return J(oe,(c,A)=>{if(!Object.keys(c).length)return;!U(c,A)&&(F.validated?b():w())}),W}function $t(e,t){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1,keepValueOnUnmount:void 0,modelPropName:"modelValue",syncVModel:!0});if(!t)return n();const r="valueProp"in t?t.valueProp:t.checkedValue;return Object.assign(Object.assign(Object.assign({},n()),t||{}),{checkedValue:r})}function Gt(e,t){if(e)return e[t]}function Wt(e,t,n){const r=n!=null&&n.standalone?void 0:Se(ge),i=n==null?void 0:n.checkedValue,a=n==null?void 0:n.uncheckedValue;function o(f){const s=f.handleChange,m=C(()=>{const g=v(f.value),O=v(i);return Array.isArray(g)?g.findIndex(j=>U(j,O))>=0:U(O,g)});function V(g,O=!0){var j;if(m.value===((j=g==null?void 0:g.target)===null||j===void 0?void 0:j.checked)){O&&f.validate();return}let M=ke(g);r||(M=Me(v(f.value),v(i),v(a))),s(M,O)}return Object.assign(Object.assign({},f),{checked:m,checkedValue:i,uncheckedValue:a,handleChange:V})}return o(ot(e,t,n))}function qt({prop:e,value:t,handleChange:n}){const r=Xe();if(!r)return;const i=e||"modelValue",a=`update:${i}`;i in r.props&&(J(t,o=>{U(o,Ge(r,i))||r.emit(a,o)}),J(()=>Ge(r,i),o=>{if(o===be&&t.value===void 0)return;const f=o===be?void 0:o;U(f,jt(t.value,r.props.modelModifiers))||n(f)}))}function Ge(e,t){return e.props[t]}const Ht=qe({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Re().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:be},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,t){const n=re(e,"rules"),r=re(e,"name"),i=re(e,"label"),a=re(e,"uncheckedValue"),o=re(e,"keepValue"),{errors:f,value:s,errorMessage:m,validate:V,handleChange:g,handleBlur:O,setTouched:j,resetField:M,handleReset:S,meta:K,checked:D,setErrors:I}=Lt(r,n,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:t.attrs.type,initialValue:Yt(e,t),checkedValue:t.attrs.value,uncheckedValue:a,label:i,validateOnValueUpdate:!1,keepValueOnUnmount:o}),L=function(R,_=!0){g(R,_),t.emit("update:modelValue",s.value)},F=k=>{fe(t.attrs.type)||(s.value=ke(k))},$=function(R){F(R),t.emit("update:modelValue",s.value)},Z=C(()=>{const{validateOnInput:k,validateOnChange:R,validateOnBlur:_,validateOnModelUpdate:b}=Kt(e),w=[O,t.attrs.onBlur,_?V:void 0].filter(Boolean),Y=[P=>L(P,k),t.attrs.onInput].filter(Boolean),ie=[P=>L(P,R),t.attrs.onChange].filter(Boolean),z={name:e.name,onBlur:w,onInput:Y,onChange:ie};z["onUpdate:modelValue"]=P=>L(P,b),fe(t.attrs.type)&&D&&(z.checked=D.value);const G=We(e,t);return Ft(G,t.attrs)&&(z.value=s.value),z});function H(){return{field:Z.value,value:s.value,meta:K,errors:f.value,errorMessage:m.value,validate:V,resetField:M,handleChange:L,handleInput:$,handleReset:S,handleBlur:O,setTouched:j,setErrors:I}}return t.expose({setErrors:I,setTouched:j,reset:M,validate:V,handleChange:g}),()=>{const k=He(We(e,t)),R=nt(k,t,H);return k?Ke(k,Object.assign(Object.assign({},t.attrs),Z.value),R):R}}});function We(e,t){let n=e.as||"";return!e.as&&!t.slots.default&&(n="input"),n}function Kt(e){var t,n,r,i;const{validateOnInput:a,validateOnChange:o,validateOnBlur:f,validateOnModelUpdate:s}=Re();return{validateOnInput:(t=e.validateOnInput)!==null&&t!==void 0?t:a,validateOnChange:(n=e.validateOnChange)!==null&&n!==void 0?n:o,validateOnBlur:(r=e.validateOnBlur)!==null&&r!==void 0?r:f,validateOnModelUpdate:(i=e.validateOnModelUpdate)!==null&&i!==void 0?i:s}}function Yt(e,t){return fe(t.attrs.type)?Te(e,"modelValue")?e.modelValue:void 0:Te(e,"modelValue")?e.modelValue:t.attrs.value}const nn=Ht;let Qt=0;function Xt(e){var t;const n=Qt++;let r=!1;const i=ee({}),a=ee(!1),o=ee(0),f=[],s=Ie(E(v(e==null?void 0:e.initialValues)||{})),{errorBag:m,setErrorBag:V,setFieldErrorBag:g}=xt(e==null?void 0:e.initialErrors),O=C(()=>B(m.value).reduce((l,u)=>{const y=m.value[u];return y&&y.length&&(l[u]=y[0]),l},{}));function j(l){const u=i.value[l];return Array.isArray(u)?u[0]:u}function M(l){return!!i.value[l]}const S=C(()=>B(i.value).reduce((l,u)=>{const y=j(u);return y&&(l[u]=v(y.label||y.name)||""),l},{})),K=C(()=>B(i.value).reduce((l,u)=>{var y;const h=j(u);return h&&(l[u]=(y=h.bails)!==null&&y!==void 0?y:!0),l},{})),D=Object.assign({},(e==null?void 0:e.initialErrors)||{}),I=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:L,originalInitialValues:F,setInitialValues:$}=Zt(i,s,e==null?void 0:e.initialValues),Z=Jt(i,s,F,O),H=e==null?void 0:e.validationSchema,k=ze(Pe,5),R=ze(Pe,5),_=_e(async l=>await l==="silent"?k():R(),(l,[u])=>{const y=b.fieldsByPath.value||{},h=B(b.errorBag.value);return[...new Set([...B(l.results),...B(y),...h])].reduce((p,N)=>{const x=y[N],ce=(l.results[N]||{errors:[]}).errors,X={errors:ce,valid:!ce.length};if(p.results[N]=X,X.valid||(p.errors[N]=X.errors[0]),!x)return z(N,ce),p;if(Y(x,me=>me.meta.valid=X.valid),u==="silent")return p;const ft=Array.isArray(x)?x.some(me=>me.meta.validated):x.meta.validated;return u==="validated-only"&&!ft||Y(x,me=>me.setState({errors:X.errors})),p},{valid:l.valid,results:{},errors:{}})}),b={formId:n,fieldsByPath:i,values:s,errorBag:m,errors:O,schema:H,submitCount:o,meta:Z,isSubmitting:a,fieldArrays:f,keepValuesOnUnmount:I,validateSchema:v(H)?_:void 0,validate:Q,register:T,unregister:Ee,setFieldErrorBag:g,validateField:ne,setFieldValue:P,setValues:te,setErrors:G,setFieldError:z,setFieldTouched:ue,setTouched:W,resetForm:oe,handleSubmit:se,stageInitialValue:ct,unsetInitialValue:st,setFieldInitialValue:Ne,useFieldModel:Oe};function w(l){return Array.isArray(l)}function Y(l,u){return Array.isArray(l)?l.forEach(u):u(l)}function ie(l){Object.values(i.value).forEach(u=>{u&&Y(u,l)})}function z(l,u){g(l,u)}function G(l){V(l)}function P(l,u,{force:y}={force:!1}){var h;const d=i.value[l],p=E(u);if(!d){ae(s,l,p);return}if(w(d)&&((h=d[0])===null||h===void 0?void 0:h.type)==="checkbox"&&!Array.isArray(u)){const x=E(Me(q(s,l)||[],u,void 0));ae(s,l,x);return}let N=u;!w(d)&&d.type==="checkbox"&&!y&&!r&&(N=E(Me(q(s,l),u,v(d.uncheckedValue)))),ae(s,l,N)}function te(l){B(s).forEach(u=>{delete s[u]}),B(l).forEach(u=>{P(u,l[u])}),f.forEach(u=>u&&u.reset())}function ve(l){const{value:u}=ut(l);return J(u,()=>{M(v(l))||Q({mode:"validated-only"})},{deep:!0}),u}function Oe(l){return Array.isArray(l)?l.map(ve):ve(l)}function ue(l,u){const y=i.value[l];y&&Y(y,h=>h.setTouched(u))}function W(l){B(l).forEach(u=>{ue(u,!!l[u])})}function oe(l){r=!0,ie(u=>u.resetField()),l!=null&&l.values?($(l.values),te(l==null?void 0:l.values)):($(F.value),te(F.value)),l!=null&&l.touched&&W(l.touched),G((l==null?void 0:l.errors)||{}),o.value=(l==null?void 0:l.submitCount)||0,ye(()=>{r=!1})}function c(l,u){const y=ht(l),h=u;if(!i.value[h]){i.value[h]=y;return}const d=i.value[h];d&&!Array.isArray(d)&&(i.value[h]=[d]),i.value[h]=[...i.value[h],y]}function A(l,u){const y=u,h=i.value[y];if(h){if(!w(h)&&l.id===h.id){delete i.value[y];return}if(w(h)){const d=h.findIndex(p=>p.id===l.id);if(d===-1)return;h.splice(d,1),h.length||delete i.value[y]}}}function T(l){const u=v(l.name);c(l,u),Ve(l.name)&&J(l.name,async(h,d)=>{await ye(),A(l,d),c(l,h),(O.value[d]||O.value[h])&&(z(d,void 0),ne(h)),await ye(),M(d)||je(s,d)});const y=v(l.errorMessage);y&&(D==null?void 0:D[u])!==y&&ne(u),delete D[u]}function Ee(l){const u=v(l.name),y=i.value[u],h=!!y&&w(y);A(l,u),ye(()=>{var d;const p=(d=v(l.keepValueOnUnmount))!==null&&d!==void 0?d:v(I),N=q(s,u);if(h&&(y===i.value[u]||!i.value[u])&&Array.isArray(N)&&!p){const ce=N.findIndex(X=>U(X,v(l.checkedValue)));if(ce>-1){const X=[...N];X.splice(ce,1),P(u,X,{force:!0})}}if(!M(u)){if(z(u,void 0),p||h&&!xe(q(s,u)))return;je(s,u)}})}async function Q(l){if(ie(d=>d.meta.validated=!0),b.validateSchema)return b.validateSchema((l==null?void 0:l.mode)||"force");const u=await Promise.all(Object.values(i.value).map(d=>{const p=Array.isArray(d)?d[0]:d;return p?p.validate(l).then(N=>({key:v(p.name),valid:N.valid,errors:N.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),y={},h={};for(const d of u)y[d.key]={valid:d.valid,errors:d.errors},d.errors.length&&(h[d.key]=d.errors[0]);return{valid:u.every(d=>d.valid),results:y,errors:h}}async function ne(l){const u=i.value[l];return u?Array.isArray(u)?u.map(y=>y.validate())[0]:u.validate():Promise.resolve({errors:[],valid:!0})}function se(l,u){return function(h){return h instanceof Event&&(h.preventDefault(),h.stopPropagation()),W(B(i.value).reduce((d,p)=>(d[p]=!0,d),{})),a.value=!0,o.value++,Q().then(d=>{if(d.valid&&typeof l=="function")return l(E(s),{evt:h,setErrors:G,setFieldError:z,setTouched:W,setFieldTouched:ue,setValues:te,setFieldValue:P,resetForm:oe});!d.valid&&typeof u=="function"&&u({values:E(s),evt:h,errors:d.errors,results:d.results})}).then(d=>(a.value=!1,d),d=>{throw a.value=!1,d})}}function Ne(l,u){ae(L.value,l,E(u))}function st(l){je(L.value,l)}function ct(l,u,y=!1){ae(s,l,u),Ne(l,u),y&&!(e!=null&&e.initialValues)&&ae(F.value,l,E(u))}async function Pe(){const l=v(H);return l?he(l)?await Pt(l,s):await Tt(l,s,{names:S.value,bailsMap:K.value}):{valid:!0,results:{},errors:{}}}const dt=se((l,{evt:u})=>{tt(u)&&u.target.submit()});return Ye(()=>{if(e!=null&&e.initialErrors&&G(e.initialErrors),e!=null&&e.initialTouched&&W(e.initialTouched),e!=null&&e.validateOnMount){Q();return}b.validateSchema&&b.validateSchema("silent")}),Ve(H)&&J(H,()=>{var l;(l=b.validateSchema)===null||l===void 0||l.call(b,"validated-only")}),Qe(ge,b),{errors:O,meta:Z,values:s,isSubmitting:a,submitCount:o,validate:Q,validateField:ne,handleReset:()=>oe(),resetForm:oe,handleSubmit:se,submitForm:dt,setFieldError:z,setErrors:G,setFieldValue:P,setValues:te,setFieldTouched:ue,setTouched:W,useFieldModel:Oe}}function Jt(e,t,n,r){const i={touched:"some",pending:"some",valid:"every"},a=C(()=>!U(t,v(n)));function o(){const s=Object.values(e.value).flat(1).filter(Boolean);return B(i).reduce((m,V)=>{const g=i[V];return m[V]=s[g](O=>O.meta[V]),m},{})}const f=Ie(o());return mt(()=>{const s=o();f.touched=s.touched,f.valid=s.valid,f.pending=s.pending}),C(()=>Object.assign(Object.assign({initialValues:v(n)},f),{valid:f.valid&&!B(r.value).length,dirty:a.value}))}function Zt(e,t,n){const r=ee(E(v(n))||{}),i=ee(E(v(n))||{});function a(o,f=!1){r.value=E(o),i.value=E(o),f&&B(e.value).forEach(s=>{const m=e.value[s],V=Array.isArray(m)?m.some(O=>O.meta.touched):m==null?void 0:m.meta.touched;if(!m||V)return;const g=q(r.value,s);ae(t,s,E(g))})}return Ve(n)&&J(n,o=>{a(o,!0)},{deep:!0}),{initialValues:r,originalInitialValues:i,setInitialValues:a}}function xt(e){const t=ee({});function n(a){return Array.isArray(a)?a:a?[a]:[]}function r(a,o){if(!o){delete t.value[a];return}t.value[a]=n(o)}function i(a){t.value=B(a).reduce((o,f)=>{const s=a[f];return s&&(o[f]=n(s)),o},{})}return e&&i(e),{errorBag:t,setErrorBag:i,setFieldErrorBag:r}}const en=qe({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,t){const n=re(e,"initialValues"),r=re(e,"validationSchema"),i=re(e,"keepValues"),{errors:a,values:o,meta:f,isSubmitting:s,submitCount:m,validate:V,validateField:g,handleReset:O,resetForm:j,handleSubmit:M,setErrors:S,setFieldError:K,setFieldValue:D,setValues:I,setFieldTouched:L,setTouched:F}=Xt({validationSchema:r.value?r:void 0,initialValues:n,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:i}),$=M((_,{evt:b})=>{tt(b)&&b.target.submit()},e.onInvalidSubmit),Z=e.onSubmit?M(e.onSubmit,e.onInvalidSubmit):$;function H(_){Be(_)&&_.preventDefault(),O(),typeof t.attrs.onReset=="function"&&t.attrs.onReset()}function k(_,b){return M(typeof _=="function"&&!b?_:b,e.onInvalidSubmit)(_)}function R(){return{meta:f.value,errors:a.value,values:o,isSubmitting:s.value,submitCount:m.value,validate:V,validateField:g,handleSubmit:k,handleReset:O,submitForm:$,setErrors:S,setFieldError:K,setFieldValue:D,setValues:I,setFieldTouched:L,setTouched:F,resetForm:j}}return t.expose({setFieldError:K,setErrors:S,setFieldValue:D,setValues:I,setFieldTouched:L,setTouched:F,resetForm:j,validate:V,validateField:g}),function(){const b=e.as==="form"?e.as:He(e.as),w=nt(b,t,R);if(!e.as)return w;const Y=e.as==="form"?{novalidate:!0}:{};return Ke(b,Object.assign(Object.assign(Object.assign({},Y),t.attrs),{onSubmit:Z,onReset:H}),w)}}}),rn=en;export{rn as F,nn as a};
