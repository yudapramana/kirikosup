import{a as A}from"./axios-xY6ymfx7.js";import{j as ye}from"./jquery-3YVrljwu.js";import"./admin-lte-FvLk5dZQ.js";import"./vue-xoQ26dS4.js";import{d as ve,c as xe}from"./pinia-2hPP-Ht5.js";import{u as de,a as Se,c as Ue,b as Ce}from"./vue-router-cB6XJb1i.js";import{_ as R,r as w,o as G,j as te,c as o,e as l,q as e,$ as x,l as B,a0 as P,a1 as re,u as m,E as Me,F as L,y as H,x as V,A as c,z as C,a2 as O,D as ce,a3 as D,p as E,w as fe,a4 as ge,k as ue,L as Pe,a5 as Ye}from"./@vue-Dapi5KFD.js";import{h as T}from"./moment-48mws5NR.js";import{a as me}from"./laravel-vue-pagination-JP8Fi1nm.js";import{S as Z}from"./sweetalert2-yBy_yMf0.js";import{u as ie}from"./@vueuse-kFp-jZeW.js";import{t as ee}from"./toastr-I_eXAbTv.js";import{F as _e,a as K}from"./vee-validate-ujRG6oi5.js";import{f as De}from"./flatpickr-yqupA_2S.js";import{c as se,a as I}from"./yup-gj4Mv41Q.js";import{l as be}from"./lodash-xCHBzAyR.js";import{s as Ve,C as Ne}from"./@cloudinary-XiuOHOcb.js";import{P as Ae}from"./primevue-qSQqLnTc.js";import"./property-expr-lXxjllgd.js";import"./tiny-case--jO18g7D.js";import"./toposort-ZVQ9gtoE.js";window.axios=A;window.$=window.jQuery=ye;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const $e=(u,i)=>{const t=u.__vccOpts||u;for(const[r,s]of i)t[r]=s;return t},je={},Ee=R('<div class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1 class="m-0">Beranda</h1></div><div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Starter Page</li></ol></div></div></div></div><div class="content"><div class="container-fluid"></div></div>',2);function Le(u,i){return Ee}const Oe=$e(je,[["render",Le]]);T.locale("id");function pe(u){if(u)return T.locale("id"),T(String(u)).format(`dddd, [\r
]YYYY-MM-DD`)}const F=ve("AuthUserStore",()=>{const u=w({name:"",email:"",role:"",avatar:"",nama_pemeriksa:"",nip_pemeriksa:"",jabatan:""});return{user:u,getAuthUser:async()=>{await A.get("/api/profile").then(t=>{u.value=t.data})}}}),Be=R('<div class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1 class="m-0">Laporan Kerja</h1></div><div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Laporan Kerja</li></ol></div></div></div></div>',1),Ie={class:"content"},Re={class:"container-fluid"},ze={class:"row"},Te={class:"col-lg-12"},Fe={class:"d-flex justify-content-between mb-2"},qe=e("button",{class:"btn btn-primary"},[e("i",{class:"fa fa-plus-circle mr-1"}),C(" Tambah ")],-1),Ke={class:"btn-group"},He=e("span",{class:"mr-1"},"Print",-1),We=[He],Je=["value"],Qe={class:"card"},Xe={class:"card-body"},Ge={class:"table-responsive"},Ze={class:"table table-bordered"},es=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Tanggal"),e("th",{scope:"col",class:"text-center"},"#"),e("th",{scope:"col"},"Pekerjaan"),e("th",{scope:"col",class:"text-right"},"Vol"),e("th",{scope:"col"},"Unit"),e("th",{scope:"col"},"Eviden"),e("th",{scope:"col"},"Options")])],-1),ss={key:0},ts=["rowspan"],as={class:"text-center"},os={class:"s"},ls=e("br",null,null,-1),ns={class:"text-muted m-0 p-0",style:{"font-size":"small !important"}},is={class:"s text-right"},ds={class:"s"},rs={class:"s"},cs={class:"text-center"},us=e("i",{class:"fa fa-edit"},null,-1),ms=["onClick"],_s=e("i",{class:"fa fa-trash text-danger ml-2"},null,-1),ps=[_s],hs={class:"s"},vs={class:"s text-center"},fs=["onClick"],gs=e("i",{class:"fa fa-trash text-danger"},null,-1),bs=[gs],$s=e("td",{colspan:"7",class:"text-center"},"Belum ada data...",-1),ks={key:1},ws=e("tr",null,[e("td",{colspan:"7",class:"text-center"},"Tidak ada hasil, silahkan pilih bulan... ")],-1),ys=[ws],xs={__name:"ListReports",setup(u){const i=F(),t=w({data:[]}),r=(Y=1)=>{A.get(`/api/reports?monthyear=${a.value}&page=${Y}`).then(_=>{console.log(_.data),t.value=_.data})},s=(Y,_)=>{Z.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(p=>{p.isConfirmed&&A.delete(`/api/reports/${_}`).then(h=>{t.value.data[Y].works=t.value.data[Y].works.filter(v=>v.id!==_),Z.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"})})})},n=(Y,_)=>{Z.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(p=>{p.isConfirmed&&A.delete(`/api/parent-reports/${_}`).then(h=>{t.value.data=t.value.data.filter(v=>v.id!==_),Z.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"})})})},a=ie("SettingStore:mySelected",w("")),b=w([{text:T().subtract(2,"months").format("MMMM  YYYY"),id:T().subtract(2,"months").format("YYYY-MM")},{text:T().subtract(1,"months").format("MMMM  YYYY"),id:T().subtract(1,"months").format("YYYY-MM")},{text:T().format("MMMM  YYYY"),id:T().format("YYYY-MM")}]),y=()=>{console.log(a.value),r()},N=()=>{i.user.nama_pemeriksa?a.value?window.open("/print-lckb/"+a.value,"_blank"):alert("Pilih bulan dan tahun terlebih dahulu!"):alert("Nama dan NIP pemeriksa belum diisi!. Harap diisi di profil!")};return G(()=>{console.log(a.value),r()}),(Y,_)=>{var h,v;const p=te("router-link");return o(),l(L,null,[Be,e("div",Ie,[e("div",Re,[e("div",ze,[e("div",Te,[e("div",Fe,[e("div",null,[x(p,{to:"/admin/reports/create"},{default:B(()=>[qe]),_:1})]),e("div",Ke,[e("button",{onClick:_[0]||(_[0]=g=>N()),type:"button",class:"btn btn-secondary"},We),P(e("select",{"onUpdate:modelValue":_[1]||(_[1]=g=>Me(a)?a.value=g:null),class:"custom-select rounded-0",onChange:_[2]||(_[2]=g=>y())},[(o(!0),l(L,null,H(b.value,g=>(o(),l("option",{value:g.id,key:g.id},c(g.text),9,Je))),128))],544),[[re,m(a)]])])]),e("div",Qe,[e("div",Xe,[e("div",Ge,[e("table",Ze,[es,((h=t.value.data)==null?void 0:h.length)>0?(o(),l("tbody",ss,[(o(!0),l(L,null,H(t.value.data,(g,z)=>(o(),l(L,null,[g.works.length>0?(o(!0),l(L,{key:0},H(g.works,(M,J)=>(o(),l("tr",{key:M.id},[J===0?(o(),l("td",{key:0,rowspan:g.works.length,class:"s",style:{"white-space":"pre"}},c(m(pe)(g.date)),9,ts)):V("",!0),e("td",as,c(J+1),1),e("td",os,[C(c(M.work_name)+" ",1),ls,e("p",ns,c(M.work_detail),1)]),e("td",is,c(M.volume),1),e("td",ds,c(M.unit),1),e("td",rs,c(M.evidence),1),e("td",cs,[x(p,{to:`/admin/reports/${M.id}/edit`},{default:B(()=>[us]),_:2},1032,["to"]),e("a",{href:"#",onClick:O(Q=>s(z,M.id),["prevent"])},ps,8,ms)])]))),128)):(o(),l("tr",{key:g.id},[e("td",hs,c(m(pe)(g.date)),1),e("td",vs,[e("a",{href:"#",onClick:O(M=>n(z,g.id),["prevent"])},bs,8,fs)]),$s]))],64))),256))])):V("",!0),((v=t.value.data)==null?void 0:v.length)===0?(o(),l("tbody",ks,ys)):V("",!0)])])])]),x(m(me),{data:t.value,onPaginationChangePage:r,limit:1,keepLength:!0},null,8,["data"])])])])])],64)}}};function W(){return ee.options.positionClass="toast-bottom-right",ee.options.closeButton=!0,ee.options.progressBar=!0,ee}const Ss={class:"content-header"},Us={class:"container-fluid"},Cs={class:"row mb-2"},Ms={class:"col-sm-6"},Ps={class:"m-0"},Ys={key:0},Ds={key:1},Vs={class:"col-sm-6"},Ns={class:"breadcrumb float-sm-right"},As={class:"breadcrumb-item"},js={class:"breadcrumb-item"},Es={class:"breadcrumb-item active"},Ls={key:0},Os={key:1},Bs={class:"content"},Is={class:"container-fluid"},Rs={class:"row"},zs={class:"col-lg-12"},Ts={class:"card"},Fs={class:"card-body"},qs={class:"row"},Ks={class:"col-md-6"},Hs={class:"form-group"},Ws=e("label",{for:"date"},"Tanggal",-1),Js={class:"invalid-feedback"},Qs={class:"col-md-6"},Xs={class:"form-group"},Gs=e("label",{for:"work_name"},"Pekerjaan",-1),Zs={class:"invalid-feedback"},et={class:"form-group"},st=e("label",{for:"work_detail"},"Uraian Tugas",-1),tt={class:"invalid-feedback"},at={class:"row"},ot={class:"col-md-6"},lt={class:"form-group"},nt=e("label",{for:"volume"},"Jumlah Output",-1),it={class:"invalid-feedback"},dt={class:"col-md-6"},rt={class:"form-group"},ct=e("label",{for:"client"},"Satuan Output",-1),ut=e("option",{value:"1"},"Berkas",-1),mt=e("option",{value:"2"},"Data",-1),_t=e("option",{value:"3"},"Dokumen",-1),pt=e("option",{value:"4"},"Kali",-1),ht=e("option",{value:"5"},"Kegiatan",-1),vt=e("option",{value:"6"},"Laporan",-1),ft=e("option",{value:"7"},"Volume",-1),gt=e("option",{value:"8"},"Modul",-1),bt=e("option",{value:"9"},"Jam",-1),$t=[ut,mt,_t,pt,ht,vt,ft,gt,bt],kt={class:"invalid-feedback"},wt={class:"form-group"},yt=e("label",{for:"evidence"},"Bukti Dukung",-1),xt={class:"invalid-feedback"},St=e("button",{type:"submit",class:"btn btn-primary"},"Submit",-1),he={__name:"ReportForm",setup(u){const i=F(),t=de(),r=Se(),s=W(),n=ce({date:"",work_name:"",work_detail:"",volume:0,unit:""});w("");const a=(_,p)=>{N.value?y(_,p):b(_,p)},b=(_,p)=>{axios.post("/api/reports/create",n).then(h=>{t.push("/admin/reports"),s.success("Laporan Kerja berhasil dibuat")}).catch(h=>{p.setErrors(h.response.data.errors)})},y=(_,p)=>{axios.put(`/api/reports/${r.params.id}/edit`,n).then(h=>{t.push("/admin/reports"),s.success("Laporan Kerja berhasil diubah!")}).catch(h=>{p.setErrors(h.response.data.errors)})},N=w(!1),Y=()=>{axios.get(`/api/reports/${r.params.id}/edit`).then(_=>{console.log(_),console.log("authUserStore.user.id"),console.log(i.user.id),console.log("response.data.report.user_id"),console.log(_.data.report.user_id),N.value&&i.user.id!=_.data.report.user_id?t.push("/admin/reports"):(n.date=_.data.report.date,n.work_name=_.data.work_name,n.work_detail=_.data.work_detail,n.volume=_.data.volume,n.unit=_.data.unit_value,n.evidence=_.data.evidence)})};return G(()=>{r.name==="admin.reports.edit"&&(N.value=!0,Y()),De(".flatpickr",{dateFormat:"Y-m-d"})}),(_,p)=>{const h=te("router-link");return o(),l(L,null,[e("div",Ss,[e("div",Us,[e("div",Cs,[e("div",Ms,[e("h1",Ps,[N.value?(o(),l("span",Ys,"Edit Laporan ")):(o(),l("span",Ds,"Buat Laporan"))])]),e("div",Vs,[e("ol",Ns,[e("li",As,[x(h,{to:"/admin/dashboard"},{default:B(()=>[C("Home")]),_:1})]),e("li",js,[x(h,{to:"/admin/reports"},{default:B(()=>[C("Laporan Kerja")]),_:1})]),e("li",Es,[N.value?(o(),l("span",Ls,"Edit")):(o(),l("span",Os,"Buat"))])])])])])]),e("div",Bs,[e("div",Is,[e("div",Rs,[e("div",zs,[e("div",Ts,[e("div",Fs,[x(m(_e),{onSubmit:a},{default:B(({errors:v})=>[e("div",qs,[e("div",Ks,[e("div",Hs,[Ws,P(e("input",{"onUpdate:modelValue":p[0]||(p[0]=g=>n.date=g),type:"date",class:E(["form-control flatpickr",{"is-invalid":v.date}]),id:"date"},null,2),[[D,n.date]]),e("span",Js,c(v.date),1)])]),e("div",Qs,[e("div",Xs,[Gs,P(e("input",{"onUpdate:modelValue":p[1]||(p[1]=g=>n.work_name=g),type:"text",class:E(["form-control",{"is-invalid":v.work_name}]),id:"work_name",placeholder:"Masukkan pekerjaan..."},null,2),[[D,n.work_name]]),e("span",Zs,c(v.work_name),1)])])]),e("div",et,[st,P(e("textarea",{"onUpdate:modelValue":p[2]||(p[2]=g=>n.work_detail=g),class:E(["form-control",{"is-invalid":v.work_detail}]),id:"work_detail",rows:"3",placeholder:"Masukkan deskripsi tugas..."},null,2),[[D,n.work_detail]]),e("span",tt,c(v.work_detail),1)]),e("div",at,[e("div",ot,[e("div",lt,[nt,P(e("input",{"onUpdate:modelValue":p[3]||(p[3]=g=>n.volume=g),type:"text",class:E(["form-control",{"is-invalid":v.volume}]),id:"volume",placeholder:"Masukkan Jumlah..."},null,2),[[D,n.volume]]),e("span",it,c(v.volume),1)])]),e("div",dt,[e("div",rt,[ct,P(e("select",{"onUpdate:modelValue":p[4]||(p[4]=g=>n.unit=g),id:"client",class:E(["form-control",{"is-invalid":v.unit}])},$t,2),[[re,n.unit]]),e("span",kt,c(v.unit),1)])])]),e("div",wt,[yt,P(e("input",{"onUpdate:modelValue":p[5]||(p[5]=g=>n.evidence=g),type:"text",class:E(["form-control",{"is-invalid":v.evidence}]),id:"evidence",placeholder:"Masukkan Bukti Dokumen..."},null,2),[[D,n.evidence]]),e("span",xt,c(v.evidence),1)]),St]),_:1})])])])])])])],64)}}},Ut=["checked"],Ct={class:"text-muted m-0 p-0",style:{"font-size":"small !important"}},Mt=["value","selected"],Pt=e("i",{class:"fa fa-edit"},null,-1),Yt=[Pt],Dt=e("i",{class:"fa fa-trash text-danger ml-2"},null,-1),Vt=[Dt],Nt={__name:"UserListItem",props:{user:Object,index:Number,selectAll:Boolean},emits:["userDeleted","editUser","confirmUserDeletion"],setup(u,{emit:i}){const t=F(),r=W(),s=u,n=i,a=w([{name:"SUPERADMIN",value:1},{name:"ADMIN",value:2},{name:"USER",value:3}]),b=(N,Y)=>{axios.patch(`/api/users/${N.id}/change-role`,{role:Y}).then(()=>{r.success("Role changed successfully")})},y=()=>{n("toggleSelection",s.user)};return(N,Y)=>(o(),l("tr",null,[e("td",null,[e("input",{type:"checkbox",checked:u.selectAll,onChange:y},null,40,Ut)]),e("td",null,c(u.index+1),1),e("td",null,[C(c(u.user.name)+" ",1),e("p",Ct,c(u.user.org_name),1)]),e("td",null,c(u.user.email),1),e("td",null,c(u.user.formatted_created_at),1),e("td",null,[m(t).user.role=="SUPERADMIN"?(o(),l("select",{key:0,name:"role",id:"role",class:"form-control",onChange:Y[0]||(Y[0]=_=>b(u.user,_.target.value))},[(o(!0),l(L,null,H(a.value,_=>(o(),l("option",{key:_.value,value:_.value,selected:u.user.role===_.name},c(_.name),9,Mt))),128))],32)):(o(),l(L,{key:1},[C(c(u.user.role),1)],64))]),e("td",null,[e("a",{href:"#",onClick:Y[1]||(Y[1]=O(_=>N.$emit("editUser",u.user),["prevent"]))},Yt),e("a",{href:"#",onClick:Y[2]||(Y[2]=O(_=>N.$emit("confirmUserDeletion",u.user.id),["prevent"]))},Vt)])]))}},At=R('<div class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1 class="m-0">Daftar Pengguna</h1></div><div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Laporan Kerja</li></ol></div></div></div></div>',1),jt={class:"content"},Et={class:"container-fluid"},Lt={class:"d-flex justify-content-between"},Ot={class:"d-flex"},Bt=e("i",{class:"fa fa-plus-circle mr-1"},null,-1),It={key:0},Rt=e("i",{class:"fa fa-trash","mr-1":""},null,-1),zt={class:"ml-2"},Tt={class:"card"},Ft={class:"card-body"},qt={class:"table table-bordered"},Kt=e("th",{style:{width:"10px"}},"#",-1),Ht=e("th",null,"Name",-1),Wt=e("th",null,"Email",-1),Jt=e("th",null,"Registered Date",-1),Qt=e("th",null,"Roles",-1),Xt=e("th",null,"Options",-1),Gt={key:0},Zt={key:1},ea=e("tr",null,[e("td",{colspan:"6",class:"text-center"},"No results found...")],-1),sa=[ea],ta={class:"modal fade",id:"defaultModal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},aa={class:"modal-dialog"},oa={class:"modal-content"},la={class:"modal-header"},na={class:"modal-title"},ia={key:0},da={key:1},ra=e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")],-1),ca={class:"modal-body"},ua={class:"form-group"},ma=e("label",{for:"organization_id"},"Satuan Kerja",-1),_a=["value"],pa={class:"invalid-feedback"},ha={class:"form-group"},va=e("label",{for:"name"},"Name",-1),fa={class:"invalid-feedback"},ga={class:"form-group"},ba=e("label",{for:"email"},"Email",-1),$a={class:"invalid-feedback"},ka={class:"form-group"},wa=e("label",{for:"password"},"Password",-1),ya={class:"invalid-feedback"},xa=e("div",{class:"modal-footer justify-content-between"},[e("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary"},"Save")],-1),Sa={class:"modal fade",id:"deleteModal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Ua={class:"modal-dialog"},Ca={class:"modal-content"},Ma=R('<div class="modal-header"><h4 class="modal-title"><span>Delete User</span></h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><h5>Are you sure you want to delete this use?</h5></div>',2),Pa={class:"modal-footer justify-content-between"},Ya=e("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"}," Close ",-1),Da={__name:"UserList",setup(u){const i=W(),t=w({data:[]}),r=w({data:[]}),s=w(!1),n=w({id:"",name:"",email:"",organization_id:""}),a=w(null),b=()=>{A.get("/api/fetch-orgs").then(d=>{console.log("response"),console.log(d),r.value=d})},y=(d=1)=>{A.get(`/api/users?page=${d}`,{params:{search_query:z.value}}).then(f=>{t.value=f.data,M.value=[],k.value=!1})},N=se({name:I().required(),email:I().email().required(),password:I().required().min(8)}),Y=se({name:I().required(),email:I().email().required(),password:I().when((d,f)=>d!=""?f.required().min(8):f)}),_=(d,{resetForm:f,setFieldError:U,setErrors:j})=>{A.post("/api/users",d).then(X=>{t.value.data.unshift(X.data),$("#defaultModal").modal("hide"),f(),i.success("User created successfully!")}).catch(X=>{X.response.data.errors&&j(X.response.data.errors)})},p=()=>{s.value=!1,a.value.resetForm(),n.value={id:"",name:"",email:""},$("#defaultModal").modal("show")},h=d=>{s.value=!0,a.value.resetForm(),$("#defaultModal").modal("show"),console.log("user"),console.log(d),console.log(d.id),console.log(d.name),n.value={id:d.id,name:d.name,email:d.email,organization_id:d.org_id}},v=(d,{setErrors:f})=>{A.put("/api/users/"+n.value.id,d).then(U=>{const j=t.value.data.findIndex(X=>X.id===U.data.id);t.value.data[j]=U.data,$("#defaultModal").modal("hide"),i.success("User updated successfully!")}).catch(U=>{U.response&&f(U.response.data.errors)})},g=(d,f)=>{console.log(f),s.value?(console.log("updateUser"),v(d,f)):(console.log("createUser"),_(d,f))},z=w(null),M=w([]),J=d=>{const f=M.value.indexOf(d.id);f===-1?M.value.push(d.id):M.value.splice(f,1)},Q=w(null),le=d=>{Q.value=d,$("#deleteModal").modal("show")},q=()=>{A.delete(`/api/users/${Q.value}`).then(()=>{$("#deleteModal").modal("hide"),i.success("User deleted Successfully!"),t.value.data=t.value.data.filter(d=>d.id!==Q.value)})},ne=()=>{A.delete("/api/users",{data:{ids:M.value}}).then(d=>{t.value.data=t.value.data.filter(f=>!M.value.includes(f.id)),M.value=[],k.value=!1,i.success(d.data.message)})},k=w(!1),S=()=>{k.value?M.value=t.value.data.map(d=>d.id):M.value=[]};return fe(z,be.debounce(()=>{y()},300)),G(()=>{y(),b()}),(d,f)=>(o(),l(L,null,[At,e("div",jt,[e("div",Et,[e("div",Lt,[e("div",Ot,[e("button",{onClick:p,type:"button",class:"mb-2 btn btn-primary"},[Bt,C(" Add New User ")]),M.value.length>0?(o(),l("div",It,[e("button",{onClick:ne,type:"button",class:"ml-2 mb-2 btn btn-danger"},[Rt,C(" Delete Selected ")]),e("span",zt,"Selected "+c(M.value.length)+" users",1)])):V("",!0)]),e("div",null,[P(e("input",{type:"text","onUpdate:modelValue":f[0]||(f[0]=U=>z.value=U),class:"form-control",placeholder:"Search..."},null,512),[[D,z.value]])])]),e("div",Tt,[e("div",Ft,[e("table",qt,[e("thead",null,[e("tr",null,[e("th",null,[P(e("input",{type:"checkbox","onUpdate:modelValue":f[1]||(f[1]=U=>k.value=U),onChange:S},null,544),[[ge,k.value]])]),Kt,Ht,Wt,Jt,Qt,Xt])]),t.value.data.length>0?(o(),l("tbody",Gt,[(o(!0),l(L,null,H(t.value.data,(U,j)=>(o(),ue(Nt,{key:U.id,user:U,index:j,onEditUser:h,onConfirmUserDeletion:le,onToggleSelection:J,"select-all":k.value},null,8,["user","index","select-all"]))),128))])):(o(),l("tbody",Zt,sa))])])]),x(m(me),{data:t.value,onPaginationChangePage:y,limit:1,keepLength:!0},null,8,["data"])])]),e("div",ta,[e("div",aa,[e("div",oa,[e("div",la,[e("h4",na,[s.value?(o(),l("span",ia,"Edit User")):(o(),l("span",da,"Add New User"))]),ra]),x(m(_e),{ref_key:"form",ref:a,onSubmit:g,"validation-schema":s.value?m(Y):m(N),"initial-values":n.value},{default:B(({errors:U})=>[e("div",ca,[e("div",ua,[ma,x(m(K),{modelValue:n.value.organization_id,"onUpdate:modelValue":f[2]||(f[2]=j=>n.value.organization_id=j),name:"organization_id",as:"select",class:"form-control",id:"organization_id"},{default:B(()=>[(o(!0),l(L,null,H(r.value.data,j=>(o(),l("option",{value:j.id,key:j.id},c(j.name),9,_a))),128))]),_:1},8,["modelValue"]),e("span",pa,c(U.organization_id),1)]),e("div",ha,[va,x(m(K),{modelValue:n.value.name,"onUpdate:modelValue":f[3]||(f[3]=j=>n.value.name=j),type:"text",name:"name",id:"name",class:E(["form-control",{"is-invalid":U.name}]),"aria-describedby":"name",placeholder:"Enter full name"},null,8,["modelValue","class"]),e("span",fa,c(U.name),1)]),e("div",ga,[ba,x(m(K),{modelValue:n.value.email,"onUpdate:modelValue":f[4]||(f[4]=j=>n.value.email=j),type:"text",name:"email",id:"email",class:E(["form-control",{"is-invalid":U.email}]),"aria-describedby":"email",placeholder:"Enter email"},null,8,["modelValue","class"]),e("span",$a,c(U.email),1)]),e("div",ka,[wa,x(m(K),{modelValue:n.value.password,"onUpdate:modelValue":f[5]||(f[5]=j=>n.value.password=j),type:"text",name:"password",id:"password",class:E(["form-control",{"is-invalid":U.password}]),"aria-describedby":"password",placeholder:"Enter Password"},null,8,["modelValue","class"]),e("span",ya,c(U.password),1)])]),xa]),_:1},8,["validation-schema","initial-values"])])])]),e("div",Sa,[e("div",Ua,[e("div",Ca,[Ma,e("div",Pa,[Ya,e("button",{onClick:O(q,["prevent"]),type:"submit",class:"btn btn-primary"},"Delete")])])])])],64))}},Va=R('<div class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1 class="m-0">Settings</h1></div><div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Settings</li></ol></div></div></div></div>',1),Na={class:"content"},Aa={class:"container-fluid"},ja={class:"row"},Ea={class:"col-md-6"},La={class:"card card-primary"},Oa=e("div",{class:"card-header"},[e("h3",{class:"card-title"},"General Setting")],-1),Ba={class:"card-body"},Ia={class:"form-group"},Ra=e("label",{for:"appName"},"App Display Name",-1),za={key:0,class:"text-danger text-sm"},Ta={class:"form-group"},Fa=e("label",{for:"dateFormat"},"Date Format",-1),qa=R('<option value="m/d/Y">MM/DD/YYYY</option><option value="d/m/Y">DD/MM/YYYY</option><option value="Y-m-d">YYYY-MM-DD</option><option value="F j, Y">Month DD, YYYY</option><option value="j F Y">DD Month YYYY</option>',5),Ka=[qa],Ha={key:0,class:"text-danger text-sm"},Wa={class:"form-group"},Ja=e("label",{for:"paginationLimit"},"Pagination Limit",-1),Qa={key:0,class:"text-danger text-sm"},Xa=e("div",{class:"card-footer"},[e("button",{type:"submit",class:"btn btn-primary"},[e("i",{class:"fa fa-save mr-1"}),C("Save Changes")])],-1),Ga={__name:"UpdateSetting",setup(u){const i=w([]),t=W(),r=()=>{axios.get("/api/settings").then(a=>{i.value=a.data})},s=w(),n=()=>{s.value="",axios.post("/api/settings",i.value).then(a=>{t.success("Settings updated successfully!")}).catch(a=>{a.response&&a.response.status===422&&(s.value=a.response.data.errors)})};return G(()=>{r()}),(a,b)=>(o(),l(L,null,[Va,e("div",Na,[e("div",Aa,[e("div",ja,[e("div",Ea,[e("div",La,[Oa,e("form",{onSubmit:b[3]||(b[3]=O(y=>n(),["prevent"]))},[e("div",Ba,[e("div",Ia,[Ra,P(e("input",{"onUpdate:modelValue":b[0]||(b[0]=y=>i.value.app_name=y),type:"text",class:"form-control",id:"appName",placeholder:"Enter app display name"},null,512),[[D,i.value.app_name]]),s.value&&s.value.app_name?(o(),l("span",za,c(s.value.app_name[0]),1)):V("",!0)]),e("div",Ta,[Fa,P(e("select",{"onUpdate:modelValue":b[1]||(b[1]=y=>i.value.date_format=y),class:"form-control"},Ka,512),[[re,i.value.date_format]]),s.value&&s.value.date_format?(o(),l("span",Ha,c(s.value.date_format[0]),1)):V("",!0)]),e("div",Wa,[Ja,P(e("input",{"onUpdate:modelValue":b[2]||(b[2]=y=>i.value.pagination_limit=y),type:"text",class:"form-control",id:"paginationLimit",placeholder:"Enter pagination limit"},null,512),[[D,i.value.pagination_limit]]),s.value&&s.value.pagination_limit?(o(),l("span",Qa,c(s.value.pagination_limit[0]),1)):V("",!0)])]),Xa],32)])])])])])],64))}},ke={__name:"CloudImage",props:{imageName:String},setup(u){const i=new Ne({cloud:{cloudName:"kemenagpessel",uploadPreset:"profile_picture_pegawai"}}),t=u,r=i.image(t.imageName);return(s,n)=>(o(),ue(m(Ve),{"cld-img":m(r),class:"profile-user-img img-circle"},null,8,["cld-img"]))}},Za=R('<div class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1 class="m-0">Profile</h1></div><div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Profile</li></ol></div></div></div></div>',1),eo={class:"content"},so={class:"container-fluid"},to={class:"row"},ao={class:"col-md-3"},oo={class:"card card-primary card-outline"},lo={class:"card-body box-profile"},no={class:"text-center"},io={class:"profile-username text-center"},ro={class:"text-muted text-center"},co={class:"col-md-9"},uo={class:"card"},mo=R('<div class="card-header p-2"><ul class="nav nav-pills"><li class="nav-item"><a class="nav-link active" href="#profile" data-toggle="tab"><i class="fa fa-user mr-1"></i> Edit Profile</a></li><li class="nav-item"><a class="nav-link" href="#changePassword" data-toggle="tab"><i class="fa fa-key mr-1"></i> Change Password</a></li></ul></div>',1),_o={class:"card-body"},po={class:"tab-content"},ho={class:"tab-pane active",id:"profile"},vo={class:"form-group row"},fo=e("label",{for:"inputName",class:"col-sm-2 col-form-label"},"Name",-1),go={class:"col-sm-10"},bo={key:0,class:"text-danger text-sm"},$o={class:"form-group row"},ko=e("label",{for:"inputEmail",class:"col-sm-2 col-form-label"},"Email",-1),wo={class:"col-sm-10"},yo={key:0,class:"text-danger text-sm"},xo={class:"form-group row"},So=e("label",{for:"jabatan",class:"col-sm-2 col-form-label"},"Jabatan",-1),Uo={class:"col-sm-10"},Co={key:0,class:"text-danger text-sm"},Mo={class:"form-group row"},Po=e("label",{for:"nama_pemeriksa",class:"col-sm-2 col-form-label"},"Nama Pemeriksa",-1),Yo={class:"col-sm-10"},Do={key:0,class:"text-danger text-sm"},Vo={class:"form-group row"},No=e("label",{for:"nip_pemeriksa",class:"col-sm-2 col-form-label"},"NIP Pemeriksa",-1),Ao={class:"col-sm-10"},jo={key:0,class:"text-danger text-sm"},Eo=e("div",{class:"form-group row"},[e("div",{class:"offset-sm-2 col-sm-10"},[e("button",{type:"submit",class:"btn btn-success"},[e("i",{class:"fa fa-save mr-1"}),C(" Save Changes")])])],-1),Lo={class:"tab-pane",id:"changePassword"},Oo={class:"form-group row"},Bo=e("label",{for:"currentPassword",class:"col-sm-3 col-form-label"},"Current Password",-1),Io={class:"col-sm-9"},Ro={key:0,class:"text-danger text-sm"},zo={class:"form-group row"},To=e("label",{for:"newPassword",class:"col-sm-3 col-form-label"},"New Password",-1),Fo={class:"col-sm-9"},qo={key:0,class:"text-danger text-sm"},Ko={class:"form-group row"},Ho=e("label",{for:"passwordConfirmation",class:"col-sm-3 col-form-label"},"Confirm New Password",-1),Wo={class:"col-sm-9"},Jo=e("div",{class:"form-group row"},[e("div",{class:"offset-sm-3 col-sm-9"},[e("button",{type:"submit",class:"btn btn-success"},[e("i",{class:"fa fa-save mr-1"}),C(" Save Changes")])])],-1),Qo={__name:"UpdateProfile",setup(u){const i=w(""),t=window.cloudinary.createUploadWidget({cloud_name:"kemenagpessel",upload_preset:"profile_picture_pegawai"},(p,h)=>{!p&&h&&h.event==="success"&&(console.log("Done Uploading...",h.info),i.value=h.info.public_id),!p&&h&&h.event=="close"&&_()});function r(){t.open()}const s=F(),n=W(),a=w([]),b=()=>{axios.put("/api/profile",{name:s.user.name,email:s.user.email,role:s.user.role,nama_pemeriksa:s.user.nama_pemeriksa,nip_pemeriksa:s.user.nip_pemeriksa,jabatan:s.user.jabatan}).then(p=>{n.success("Profile updated successfully!")}).catch(p=>{p.response&&p.response.status===422&&(a.value=p.response.data.errors)})},y=ce({currentPassword:"",password:"",passwordConfirmation:""}),N=()=>{a.value="",axios.post("/api/change-user-password",y).then(p=>{n.success(p.data.message);for(const h in y)y[h]=""}).catch(p=>{p.response&&p.response.status===422&&(a.value=p.response.data.errors)})},Y=w(null),_=p=>{axios.post("/api/upload-profile-image",{profile_picture:i.value}).then(h=>{s.getAuthUser(),n.success("Image uploaded successfully!")})};return(p,h)=>(o(),l(L,null,[Za,e("div",eo,[e("div",so,[e("div",to,[e("div",ao,[e("div",oo,[e("div",lo,[e("div",no,[e("input",{onChange:_,ref_key:"fileInput",ref:Y,type:"hidden",class:"d-none"},null,544),x(ke,{onClick:r,"image-name":m(s).user.avatar},null,8,["image-name"])]),e("h3",io,c(m(s).user.name),1),e("p",ro,c(m(s).user.role),1)])])]),e("div",co,[e("div",uo,[mo,e("div",_o,[e("div",po,[e("div",ho,[e("form",{onSubmit:h[5]||(h[5]=O(v=>b(),["prevent"])),class:"form-horizontal"},[e("div",vo,[fo,e("div",go,[P(e("input",{"onUpdate:modelValue":h[0]||(h[0]=v=>m(s).user.name=v),type:"text",class:"form-control",id:"inputName",placeholder:"Name"},null,512),[[D,m(s).user.name]]),a.value&&a.value.name?(o(),l("span",bo,c(a.value.name[0]),1)):V("",!0)])]),e("div",$o,[ko,e("div",wo,[P(e("input",{"onUpdate:modelValue":h[1]||(h[1]=v=>m(s).user.email=v),type:"email",class:"form-control",id:"inputEmail",placeholder:"Email"},null,512),[[D,m(s).user.email]]),a.value&&a.value.email?(o(),l("span",yo,c(a.value.email[0]),1)):V("",!0)])]),e("div",xo,[So,e("div",Uo,[P(e("input",{"onUpdate:modelValue":h[2]||(h[2]=v=>m(s).user.jabatan=v),type:"text",class:"form-control",id:"jabatan",placeholder:"Nama Pemeriksa"},null,512),[[D,m(s).user.jabatan]]),a.value&&a.value.jabatan?(o(),l("span",Co,c(a.value.jabatan[0]),1)):V("",!0)])]),e("div",Mo,[Po,e("div",Yo,[P(e("input",{"onUpdate:modelValue":h[3]||(h[3]=v=>m(s).user.nama_pemeriksa=v),type:"text",class:"form-control",id:"nama_pemeriksa",placeholder:"Nama Pemeriksa"},null,512),[[D,m(s).user.nama_pemeriksa]]),a.value&&a.value.nama_pemeriksa?(o(),l("span",Do,c(a.value.nama_pemeriksa[0]),1)):V("",!0)])]),e("div",Vo,[No,e("div",Ao,[P(e("input",{"onUpdate:modelValue":h[4]||(h[4]=v=>m(s).user.nip_pemeriksa=v),type:"text",class:"form-control",id:"nip_pemeriksa",placeholder:"Nama Pemeriksa"},null,512),[[D,m(s).user.nip_pemeriksa]]),a.value&&a.value.nip_pemeriksa?(o(),l("span",jo,c(a.value.nip_pemeriksa[0]),1)):V("",!0)])]),Eo],32)]),e("div",Lo,[e("form",{onSubmit:O(N,["prevent"]),class:"form-horizontal"},[e("div",Oo,[Bo,e("div",Io,[P(e("input",{"onUpdate:modelValue":h[6]||(h[6]=v=>y.currentPassword=v),type:"password",class:"form-control",id:"currentPassword",placeholder:"Current Password"},null,512),[[D,y.currentPassword]]),a.value&&a.value.current_password?(o(),l("span",Ro,c(a.value.current_password[0]),1)):V("",!0)])]),e("div",zo,[To,e("div",Fo,[P(e("input",{"onUpdate:modelValue":h[7]||(h[7]=v=>y.password=v),type:"password",class:"form-control",id:"newPassword",placeholder:"New Password"},null,512),[[D,y.password]]),a.value&&a.value.password?(o(),l("span",qo,c(a.value.password[0]),1)):V("",!0)])]),e("div",Ko,[Ho,e("div",Wo,[P(e("input",{"onUpdate:modelValue":h[8]||(h[8]=v=>y.passwordConfirmation=v),type:"password",class:"form-control",id:"passwordConfirmation",placeholder:"Confirm New Password"},null,512),[[D,y.passwordConfirmation]])])]),Jo],32)])])])])])])])])],64))}},Xo={class:"login-box"},Go={class:"card card-outline card-primary"},Zo=e("div",{class:"card-header text-center"},[e("a",{href:"#",class:"h1"},[e("b",null,"Laporan"),C(" Kinerja")])],-1),el={class:"card-body"},sl=e("p",{class:"login-box-msg"},"Kementerian Agama Kab. Pesisir Selatan",-1),tl={key:0,class:"alert alert-danger",role:"alert"},al={class:"input-group mb-3"},ol=e("div",{class:"input-group-append"},[e("div",{class:"input-group-text"},[e("span",{class:"fas fa-envelope"})])],-1),ll={class:"input-group mb-3"},nl=e("div",{class:"input-group-append"},[e("div",{class:"input-group-text"},[e("span",{class:"fas fa-lock"})])],-1),il={class:"row"},dl=e("div",{class:"col-8"},[e("div",{class:"icheck-primary"},[e("input",{type:"checkbox",id:"remember"}),e("label",{for:"remember"},"   Remember Me ")])],-1),rl={class:"col-4"},cl=["disabled"],ul={key:0,class:"spinner-border spinner-border-sm mr-2",role:"status"},ml=e("span",{class:"sr-only"},"Loading...",-1),_l=[ml],pl={key:1},hl=e("p",{class:"mb-1"},[e("a",{href:"#"},[C("Lupa Password? "),e("br"),C(" Hubungi Admin Satker")])],-1),vl={__name:"Login",setup(u){F();const i=de(),t=ce({email:"",password:""}),r=w(!1),s=w(""),n=()=>{r.value=!0,s.value="",A.post("/login",t).then(()=>{i.push("/admin/dashboard")}).catch(a=>{s.value=a.response.data.message}).finally(()=>{r.value=!1})};return(a,b)=>(o(),l("div",Xo,[e("div",Go,[Zo,e("div",el,[sl,s.value?(o(),l("div",tl,c(s.value),1)):V("",!0),e("form",{onSubmit:O(n,["prevent"])},[e("div",al,[P(e("input",{"onUpdate:modelValue":b[0]||(b[0]=y=>t.email=y),type:"email",class:"form-control",placeholder:"Email"},null,512),[[D,t.email]]),ol]),e("div",ll,[P(e("input",{"onUpdate:modelValue":b[1]||(b[1]=y=>t.password=y),type:"password",class:"form-control",placeholder:"Password"},null,512),[[D,t.password]]),nl]),e("div",il,[dl,e("div",rl,[e("button",{type:"submit",class:"btn btn-primary btn-block",disabled:r.value},[r.value?(o(),l("div",ul,_l)):(o(),l("span",pl,"Sign In"))],8,cl)])])],32),hl])])]))}},fl=["checked"],gl=e("i",{class:"fa fa-edit"},null,-1),bl=[gl],$l=e("i",{class:"fa fa-trash text-danger ml-2"},null,-1),kl=[$l],wl={__name:"OrgListItem",props:{org:Object,index:Number,selectAll:Boolean},emits:["orgrDeleted","editOrg","confirmOrgDeletion"],setup(u,{emit:i}){W();const t=u,r=i,s=()=>{r("toggleSelection",t.org)};return(n,a)=>(o(),l("tr",null,[e("td",null,[e("input",{type:"checkbox",checked:u.selectAll,onChange:s},null,40,fl)]),e("td",null,c(u.index+1),1),e("td",null,c(u.org.name),1),e("td",null,c(u.org.email),1),e("td",null,c(u.org.status),1),e("td",null,[e("a",{href:"#",onClick:a[0]||(a[0]=O(b=>n.$emit("editOrg",u.org),["prevent"]))},bl),e("a",{href:"#",onClick:a[1]||(a[1]=O(b=>n.$emit("confirmOrgDeletion",u.org.id),["prevent"]))},kl)])]))}},yl=R('<div class="content-header"><div class="container-fluid"><div class="row mb-2"><div class="col-sm-6"><h1 class="m-0">Daftar Satuan Kerja</h1></div><div class="col-sm-6"><ol class="breadcrumb float-sm-right"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Satuan Kerja</li></ol></div></div></div></div>',1),xl={class:"content"},Sl={class:"container-fluid"},Ul={class:"d-flex justify-content-between"},Cl={class:"d-flex"},Ml=e("i",{class:"fa fa-plus-circle mr-1"},null,-1),Pl={key:0},Yl=e("i",{class:"fa fa-trash","mr-1":""},null,-1),Dl={class:"ml-2"},Vl={class:"card"},Nl={class:"card-body"},Al={class:"table table-bordered"},jl=e("th",{style:{width:"10px"}},"#",-1),El=e("th",null,"Name",-1),Ll=e("th",null,"Email",-1),Ol=e("th",null,"Status",-1),Bl=e("th",null,"Options",-1),Il={key:0},Rl={key:1},zl=e("tr",null,[e("td",{colspan:"6",class:"text-center"},"No results found...")],-1),Tl=[zl],Fl={class:"modal fade",id:"defaultModal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ql={class:"modal-dialog"},Kl={class:"modal-content"},Hl={class:"modal-header"},Wl={class:"modal-title"},Jl={key:0},Ql={key:1},Xl=e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")],-1),Gl={class:"modal-body"},Zl={class:"form-group"},en=e("label",{for:"name"},"Name",-1),sn={class:"invalid-feedback"},tn={class:"form-group"},an=e("label",{for:"email"},"Email",-1),on={class:"invalid-feedback"},ln={class:"form-group"},nn=e("label",{for:"password"},"Password",-1),dn={class:"invalid-feedback"},rn=e("div",{class:"modal-footer justify-content-between"},[e("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary"},"Save")],-1),cn={class:"modal fade",id:"deleteModal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},un={class:"modal-dialog"},mn={class:"modal-content"},_n=R('<div class="modal-header"><h4 class="modal-title"><span>Delete Org</span></h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><h5>Are you sure you want to delete this use?</h5></div>',2),pn={class:"modal-footer justify-content-between"},hn=e("button",{type:"button",class:"btn btn-default","data-dismiss":"modal"}," Close ",-1),vn={__name:"OrgList",setup(u){const i=W(),t=w({data:[]}),r=w(!1),s=w({id:"",name:"",email:""}),n=w(null),a=(k=1)=>{A.get(`/api/orgs?page=${k}`,{params:{search_query:v.value}}).then(S=>{console.log(S),t.value=S.data,g.value=[],q.value=!1})},b=se({name:I().required(),email:I().email().required()}),y=se({name:I().required(),email:I().email().required()}),N=(k,{resetForm:S,setFieldError:d,setErrors:f})=>{A.post("/api/orgs",k).then(U=>{t.value.data.unshift(U.data),$("#defaultModal").modal("hide"),S(),i.success("Orgs created successfully!")}).catch(U=>{U.response.data.errors&&f(U.response.data.errors)})},Y=()=>{r.value=!1,n.value.resetForm(),s.value={id:"",name:"",email:""},$("#defaultModal").modal("show")},_=k=>{r.value=!0,n.value.resetForm(),$("#defaultModal").modal("show"),console.log("org"),console.log(k.id),console.log(k.name),s.value={id:k.id,name:k.name,email:k.email}},p=(k,{setErrors:S})=>{console.log(k),A.put("/api/orgs/"+s.value.id,k).then(d=>{const f=t.value.data.findIndex(U=>U.id===d.data.id);t.value.data[f]=d.data,$("#defaultModal").modal("hide"),i.success("Org updated successfully!")}).catch(d=>{d.response&&S(d.response.data.errors)})},h=(k,S)=>{console.log(S),r.value?p(k,S):N(k,S)},v=w(null),g=w([]),z=k=>{const S=g.value.indexOf(k.id);S===-1?g.value.push(k.id):g.value.splice(S,1)},M=w(null),J=k=>{M.value=k,$("#deleteModal").modal("show")},Q=()=>{A.delete(`/api/orgs/${M.value}`).then(()=>{$("#deleteModal").modal("hide"),i.success("Org deleted Successfully!"),t.value.data=t.value.data.filter(k=>k.id!==M.value)})},le=()=>{A.delete("/api/orgs",{data:{ids:g.value}}).then(k=>{t.value.data=t.value.data.filter(S=>!g.value.includes(S.id)),g.value=[],q.value=!1,i.success(k.data.message)})},q=w(!1),ne=()=>{q.value?g.value=t.value.data.map(k=>k.id):g.value=[]};return fe(v,be.debounce(()=>{a()},300)),G(()=>{a()}),(k,S)=>(o(),l(L,null,[yl,e("div",xl,[e("div",Sl,[e("div",Ul,[e("div",Cl,[e("button",{onClick:Y,type:"button",class:"mb-2 btn btn-primary"},[Ml,C(" Tambah Satker ")]),g.value.length>0?(o(),l("div",Pl,[e("button",{onClick:le,type:"button",class:"ml-2 mb-2 btn btn-danger"},[Yl,C(" Delete Selected ")]),e("span",Dl,"Selected "+c(g.value.length)+" organizations",1)])):V("",!0)]),e("div",null,[P(e("input",{type:"text","onUpdate:modelValue":S[0]||(S[0]=d=>v.value=d),class:"form-control",placeholder:"Search..."},null,512),[[D,v.value]])])]),e("div",Vl,[e("div",Nl,[e("table",Al,[e("thead",null,[e("tr",null,[e("th",null,[P(e("input",{type:"checkbox","onUpdate:modelValue":S[1]||(S[1]=d=>q.value=d),onChange:ne},null,544),[[ge,q.value]])]),jl,El,Ll,Ol,Bl])]),t.value.data.length>0?(o(),l("tbody",Il,[(o(!0),l(L,null,H(t.value.data,(d,f)=>(o(),ue(wl,{key:d.id,org:d,index:f,onEditOrg:_,onConfirmOrgDeletion:J,onToggleSelection:z,"select-all":q.value},null,8,["org","index","select-all"]))),128))])):(o(),l("tbody",Rl,Tl))])])]),x(m(me),{data:t.value,onPaginationChangePage:a,limit:1,keepLength:!0},null,8,["data"])])]),e("div",Fl,[e("div",ql,[e("div",Kl,[e("div",Hl,[e("h4",Wl,[r.value?(o(),l("span",Jl,"Edit Org")):(o(),l("span",Ql,"Add New Org"))]),Xl]),x(m(_e),{ref_key:"form",ref:n,onSubmit:h,"validation-schema":r.value?m(y):m(b),"initial-values":s.value},{default:B(({errors:d})=>[e("div",Gl,[e("div",Zl,[en,x(m(K),{modelValue:s.value.name,"onUpdate:modelValue":S[2]||(S[2]=f=>s.value.name=f),type:"text",name:"name",id:"name",class:E(["form-control",{"is-invalid":d.name}]),"aria-describedby":"name",placeholder:"Enter full name"},null,8,["modelValue","class"]),e("span",sn,c(d.name),1)]),e("div",tn,[an,x(m(K),{modelValue:s.value.email,"onUpdate:modelValue":S[3]||(S[3]=f=>s.value.email=f),type:"text",name:"email",id:"email",class:E(["form-control",{"is-invalid":d.email}]),"aria-describedby":"email",placeholder:"Enter email"},null,8,["modelValue","class"]),e("span",on,c(d.email),1)]),e("div",ln,[nn,x(m(K),{modelValue:s.value.password,"onUpdate:modelValue":S[4]||(S[4]=f=>s.value.password=f),type:"text",name:"password",id:"password",class:E(["form-control",{"is-invalid":d.password}]),"aria-describedby":"password",placeholder:"Enter Password"},null,8,["modelValue","class"]),e("span",dn,c(d.password),1)])]),rn]),_:1},8,["validation-schema","initial-values"])])])]),e("div",cn,[e("div",un,[e("div",mn,[_n,e("div",pn,[hn,e("button",{onClick:O(Q,["prevent"]),type:"submit",class:"btn btn-primary"},"Delete")])])])])],64))}},fn=[{path:"/login",name:"admin.login",component:vl},{path:"/admin/dashboard",name:"admin.dashboard",component:Oe},{path:"/admin/reports",name:"admin.reports",component:xs},{path:"/admin/reports/create",name:"admin.reports.create",component:he},{path:"/admin/reports/:id/edit",name:"admin.reports.edit",component:he},{path:"/admin/organizations",name:"admin.organizations",component:vn},{path:"/admin/users",name:"admin.users",component:Da},{path:"/admin/settings",name:"admin.settings",component:Ga},{path:"/admin/profile",name:"admin.profile",component:Qo}],ae=ve("SettingStore",()=>{const u=w({app_name:""}),i=ie("SettingStore:theme",w("light")),t=ie("SettingStore:toggle",w("expanded"));return{setting:u,getSetting:async()=>{await A.get("/api/settings").then(a=>{u.value=a.data})},theme:i,changeTheme:()=>{i.value=i.value==="light"?"dark":"light"},toggleMenuIcon:()=>{t.value=t.value==="collapsed"?"sidebar-collapse":""}}}),gn={class:"navbar-nav"},bn=e("a",{class:"nav-link","data-widget":"pushmenu",href:"#",role:"button"},[e("i",{class:"fas fa-bars"})],-1),$n=[bn],kn={class:"nav-item d-none d-sm-inline-block"},wn=e("ul",{class:"navbar-nav ml-auto"},[e("li",{class:"nav-item"},[e("a",{class:"nav-link","data-widget":"navbar-search",href:"#",role:"button"},[e("i",{class:"fas fa-search"})]),e("div",{class:"navbar-search-block"},[e("form",{class:"form-inline"},[e("div",{class:"input-group input-group-sm"},[e("input",{class:"form-control form-control-navbar",type:"search",placeholder:"Search","aria-label":"Search"}),e("div",{class:"input-group-append"},[e("button",{class:"btn btn-navbar",type:"submit"},[e("i",{class:"fas fa-search"})]),e("button",{class:"btn btn-navbar",type:"button","data-widget":"navbar-search"},[e("i",{class:"fas fa-times"})])])])])])]),e("li",{class:"nav-item dropdown"},[e("a",{class:"nav-link","data-toggle":"dropdown",href:"#"},[e("i",{class:"far fa-comments"}),e("span",{class:"badge badge-danger navbar-badge"},"3")]),e("div",{class:"dropdown-menu dropdown-menu-lg dropdown-menu-right"},[e("a",{href:"#",class:"dropdown-item"},[e("div",{class:"media"},[e("img",{src:"https://adminlte.io/themes/v3/dist/img/user1-128x128.jpg",alt:"User Avatar",class:"img-size-50 mr-3 img-circle"}),e("div",{class:"media-body"},[e("h3",{class:"dropdown-item-title"},[C(" Brad Diesel "),e("span",{class:"float-right text-sm text-danger"},[e("i",{class:"fas fa-star"})])]),e("p",{class:"text-sm"},"Call me whenever you can..."),e("p",{class:"text-sm text-muted"},[e("i",{class:"far fa-clock mr-1"}),C(" 4 Hours Ago")])])])]),e("div",{class:"dropdown-divider"}),e("a",{href:"#",class:"dropdown-item"},[e("div",{class:"media"},[e("img",{src:"https://adminlte.io/themes/v3/dist/img/user8-128x128.jpg",alt:"User Avatar",class:"img-size-50 img-circle mr-3"}),e("div",{class:"media-body"},[e("h3",{class:"dropdown-item-title"},[C(" John Pierce "),e("span",{class:"float-right text-sm text-muted"},[e("i",{class:"fas fa-star"})])]),e("p",{class:"text-sm"},"I got your message bro"),e("p",{class:"text-sm text-muted"},[e("i",{class:"far fa-clock mr-1"}),C(" 4 Hours Ago")])])])]),e("div",{class:"dropdown-divider"}),e("a",{href:"#",class:"dropdown-item"},[e("div",{class:"media"},[e("img",{src:"https://adminlte.io/themes/v3/dist/img/user3-128x128.jpg",alt:"User Avatar",class:"img-size-50 img-circle mr-3"}),e("div",{class:"media-body"},[e("h3",{class:"dropdown-item-title"},[C(" Nora Silvester "),e("span",{class:"float-right text-sm text-warning"},[e("i",{class:"fas fa-star"})])]),e("p",{class:"text-sm"},"The subject goes here"),e("p",{class:"text-sm text-muted"},[e("i",{class:"far fa-clock mr-1"}),C(" 4 Hours Ago")])])])]),e("div",{class:"dropdown-divider"}),e("a",{href:"#",class:"dropdown-item dropdown-footer"},"See All Messages")])]),e("li",{class:"nav-item dropdown"},[e("a",{class:"nav-link","data-toggle":"dropdown",href:"#"},[e("i",{class:"far fa-bell"}),e("span",{class:"badge badge-warning navbar-badge"},"15")]),e("div",{class:"dropdown-menu dropdown-menu-lg dropdown-menu-right"},[e("span",{class:"dropdown-header"},"15 Notifications"),e("div",{class:"dropdown-divider"}),e("a",{href:"#",class:"dropdown-item"},[e("i",{class:"fas fa-envelope mr-2"}),C(" 4 new messages "),e("span",{class:"float-right text-muted text-sm"},"3 mins")]),e("div",{class:"dropdown-divider"}),e("a",{href:"#",class:"dropdown-item"},[e("i",{class:"fas fa-users mr-2"}),C(" 8 friend requests "),e("span",{class:"float-right text-muted text-sm"},"12 hours")]),e("div",{class:"dropdown-divider"}),e("a",{href:"#",class:"dropdown-item"},[e("i",{class:"fas fa-file mr-2"}),C(" 3 new reports "),e("span",{class:"float-right text-muted text-sm"},"2 days")]),e("div",{class:"dropdown-divider"}),e("a",{href:"#",class:"dropdown-item dropdown-footer"},"See All Notifications")])]),e("li",{class:"nav-item"},[e("a",{class:"nav-link","data-widget":"fullscreen",href:"#",role:"button"},[e("i",{class:"fas fa-expand-arrows-alt"})])]),e("li",{class:"nav-item"},[e("a",{class:"nav-link","data-widget":"control-sidebar","data-slide":"true",href:"#",role:"button"},[e("i",{class:"fas fa-th-large"})])])],-1),yn={__name:"AppNavbar",setup(u){const i=ae();return(t,r)=>(o(),l("nav",{class:E(["main-header navbar navbar-expand",m(i).theme==="dark"?"navbar-dark":"navbar-light"])},[e("ul",gn,[e("li",{onClick:r[0]||(r[0]=O((...s)=>m(i).toggleMenuIcon&&m(i).toggleMenuIcon(...s),["prevent"])),class:"nav-item",id:"toggleMenuIcon"},$n),e("li",kn,[e("a",{onClick:r[1]||(r[1]=O((...s)=>m(i).changeTheme&&m(i).changeTheme(...s),["prevent"])),href:"#",class:"nav-link"},[e("i",{class:E(["far",m(i).theme==="dark"?"fa-moon":"fa-sun"])},null,2)])])]),wn],2))}},xn={class:"main-sidebar sidebar-dark-primary elevation-4"},Sn={href:"index3.html",class:"brand-link"},Un=e("img",{src:"https://adminlte.io/themes/v3/dist/img/AdminLTELogo.png",alt:"AdminLTE Logo",class:"brand-image img-circle elevation-3",style:{opacity:".8"}},null,-1),Cn={class:"brand-text font-weight-light"},Mn={class:"sidebar"},Pn={class:"user-panel mt-3 pb-3 mb-3 d-flex"},Yn={class:"image"},Dn={class:"info"},Vn={href:"#",class:"d-block",style:{"font-size":"small"}},Nn={class:"mt-2"},An={class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false"},jn={class:"nav-item"},En=e("i",{class:"nav-icon fas fa-tachometer-alt"},null,-1),Ln=e("p",null," Beranda ",-1),On={class:"nav-item"},Bn=e("i",{class:"nav-icon fas fa-calendar-alt"},null,-1),In=e("p",null," Laporan Kerja ",-1),Rn={key:0,class:"nav-item"},zn=e("i",{class:"nav-icon fas fa-cog"},null,-1),Tn=e("p",null," Satuan kerja ",-1),Fn={key:1,class:"nav-item"},qn=e("i",{class:"nav-icon fas fa-users"},null,-1),Kn=e("p",null," Pengguna ",-1),Hn={key:2,class:"nav-item"},Wn=e("i",{class:"nav-icon fas fa-cog"},null,-1),Jn=e("p",null," Pengaturan ",-1),Qn={class:"nav-item"},Xn=e("i",{class:"nav-icon fas fa-user"},null,-1),Gn=e("p",null," Profil ",-1),Zn={class:"nav-item"},ei={class:"nav-link"},si=e("i",{class:"nav-icon fas fa-sign-out-alt"},null,-1),ti=e("p",null," Keluar ",-1),ai=[si,ti],oi={__name:"SidebarLeft",setup(u){const i=de(),t=ae(),r=F(),s=()=>{axios.post("/logout").then(n=>{r.user.name="",i.push("/login")})};return(n,a)=>{const b=te("router-link");return o(),l("aside",xn,[e("a",Sn,[Un,e("span",Cn,c(m(t).setting.app_name),1)]),e("div",Mn,[e("div",Pn,[e("div",Yn,[x(ke,{"image-name":m(r).user.avatar},null,8,["image-name"])]),e("div",Dn,[e("a",Vn,c(m(r).user.name),1)])]),e("nav",Nn,[e("ul",An,[e("li",jn,[x(b,{to:"/admin/dashboard","active-class":"active",class:"nav-link"},{default:B(()=>[En,Ln]),_:1})]),e("li",On,[x(b,{to:"/admin/reports",class:E([n.$route.path.startsWith("/admin/reports")?"active":"","nav-link"]),"active-class":"active"},{default:B(()=>[Bn,In]),_:1},8,["class"])]),m(r).user.role=="SUPERADMIN"?(o(),l("li",Rn,[x(b,{to:"/admin/organizations","active-class":"active",class:"nav-link"},{default:B(()=>[zn,Tn]),_:1})])):V("",!0),m(r).user.role=="SUPERADMIN"||m(r).user.role=="ADMIN"?(o(),l("li",Fn,[x(b,{to:"/admin/users","active-class":"active",class:"nav-link"},{default:B(()=>[qn,Kn]),_:1})])):V("",!0),m(r).user.role=="SUPERADMIN"?(o(),l("li",Hn,[x(b,{to:"/admin/settings","active-class":"active",class:"nav-link"},{default:B(()=>[Wn,Jn]),_:1})])):V("",!0),e("li",Qn,[x(b,{to:"/admin/profile","active-class":"active",class:"nav-link"},{default:B(()=>[Xn,Gn]),_:1})]),e("li",Zn,[e("form",ei,[e("a",{href:"#",onClick:O(s,["prevent"])},ai)])])])])])])}}},li={},ni={class:"control-sidebar control-sidebar-dark"},ii=e("div",{class:"p-3"},[e("h5",null,"Title"),e("p",null,"Sidebar content")],-1),di=[ii];function ri(u,i){return o(),l("aside",ni,di)}const ci=$e(li,[["render",ri]]),ui={class:"main-footer"},mi={class:"float-right d-none d-sm-inline"},_i={href:"#"},pi={__name:"AppFooter",props:{settings:Object},setup(u){const i=F();return(t,r)=>{var s;return o(),l("footer",ui,[e("div",mi,c(m(i).user.name),1),e("strong",null,[C("Copyright © 2024 "),e("a",_i,c((s=u.settings)==null?void 0:s.app_name),1),C(".")]),C(" All rights reserved. ")])}}},hi={class:"content-wrapper"},vi={__name:"App",setup(u){const i=F(),t=ae(),r=Pe(()=>t.theme==="dark"?"dark-mode":"");return(s,n)=>{const a=te("router-view");return m(i).user.name!==""?(o(),l("div",{key:0,class:E(["wrapper",r.value]),id:"app"},[x(yn),x(oi),e("div",hi,[x(a)]),x(ci),x(pi)],2)):(o(),l("div",{key:1,class:E(["login-page",r.value])},[x(a)],2))}}},fi=xe(),oe=Ye(vi),we=Ue({routes:fn,history:Ce()});we.beforeEach(async(u,i)=>{const t=F();if(t.user.name===""&&u.name!=="admin.login"){const r=ae();await Promise.all([t.getAuthUser(),r.getSetting()])}});oe.use(fi);oe.use(we);oe.use(Ae);oe.mount("#app");
